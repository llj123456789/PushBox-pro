# 游戏说明

* 游戏目标：将箱子推到指定位置,游戏角色包括推箱子的小人和箱子。玩家使用键盘控制小人移动去推动箱子，并将箱子摆放在指定位置。
* 但是由于游戏的不像传统的一格一格移动，而是采用物体会碰撞，反弹，且推动后仍然有速度，故游戏难度稍大。所以我设置的箱子少，便于测试。美化版将箱子数量增多，滑动摩檫力降低，屏幕刷新率高。更有可玩性，难度加大。
* //*操作一律使用大写键盘*//

# 操作指南

## 按键

* 移动

    > 使用 <kbd>W</kbd><kbd>S</kbd><kbd>A</kbd><kbd>D</kbd> 分别控制上下左右，请注意，必须是大写键盘

    > 使用<kbd>J</kbd><kbd>L</kbd>控制左右旋转，每次旋转pi/8，<kbd>I</kbd><kbd>K</kbd>控制朝向方向移动,请注意，必须是大写键盘

    > 使用<kbd>T</kbd><kbd>G</kbd><kbd>F</kbd><kbd>H</kbd> 分别控制强制上下左右，请注意，必须是大写键盘。此功能目的是放置被卡住强制改变人物位置

    > 使用<kbd>LSheft</kbd>使得人物速度为5，当方块碰到人物时候方块被人物抓取并在人物方向上，并且速度等于人物<kbd>LCtrl</kbd>使得人物速度为0，当方块与人物碰撞时候，方块速度立刻为0  


# #我在游戏基础上改变了游戏传统方式，加入了物理模块，主要是未了产生碰撞动量守恒条件，并且加入了滑动摩檫力，以实现物体被推动后的运动与停止。美化版则是在原有基础上改变了游戏图片，使得游戏更加美观。模拟碰撞反弹的过程。当然也会使得游戏难度大大提高，需要操作配合才可通关.

原版画面
![游戏原版本][orignalExample]
美化版画面
![游戏美化版][beautifulExample]
游戏胜利
![游戏胜利][end]
输入NO结束游戏
![结束][over]

# 游戏代码解释

1. 游戏音频文件./audio 和 ./music 分别存放音效与背景音乐.音效为游戏进程中物体产生的声音。而游戏背景音乐将始终播放
2. image文件，中存储不同物体的图片
3. 游戏地图文件
    > map1.txt 
        >> 为游戏地图文件，游戏采用文件读取操作，从地图读取物体坐标位置，以及该处物体坐标标签（label）
    > info1.txt
        >> 保存游戏物体信息，需要跟随地图设置更改。info1.txt中目前主要是主角数量和箱子数量
    >地图解释
        >> 地图中以字符串形式确定该位置的物体。每个物体在设置code时需分配指定的label，一个label需要对应于一种物体，
4. 游戏模块/*ps：游戏种每条函数，以及类的作用均已在代码种详细标出并且说明*/
    > main.py,
        >> 游戏主程序，创建窗口，实现游戏逻辑，比如游戏的初始化，游戏运行过程，函数调用，角色创建，以及结束后再次开始
    > gameModel.py
        >> 游戏主模块

            >>>Object类:物体基本信息，坐标，位置，图片，，，，

```python  
class Object:
    def __init__(self,ImageFile,type,label='',num=0,isMoveable=False,isVisible=True):#初始化对象，图片文件，对象类型，对象标签，对象编号
```
            >>>objectStore类:游戏种物体存储空间，为实现不同物体的管理

```python

class objectStore:#存储游戏对象
    
class Goal:#目标类
    def __init__(self,objS=objectStore):
    def judge(self,objS=objectStore):#判断是否胜利
        
```
            >>>map类，保存地图文件，存储info文件，地图的绘制...
```python

class Map: 
    def set_map(self,r,c):#设置地图，可用于地图编辑器
        #‘#’代表外墙，‘ ’代表路，‘*’代表目标，‘B’代表箱子，‘M’代表人物，‘@’代表内墙，初始位置
        #仅代表地图元素，不代表对象，对象由地图元素生成，并且以'|'分割,通过|a|之前的label(a)来确定对象位置，和对象是谁，a是每元素独有的标号，不可重复
        #地图元素与元素之间必须用|分隔，否则无法加载，或者加载错误
    '''
    ps:
    目前游戏内定#'#'代表外墙，' '代表路，'*'代表目标,'B'代表箱子,'M'代表人物,'@'代表内墙，初始位置
    请在地图文件中按照规则设置地图，否则加载出错
    '''
```

            >>>music类,目的是未来实现游戏音效和音乐播放的控制，但是本游戏音效不多，没有过多使用。
    > physical.py
        >>该类定义了游戏的动摩擦因数，重力加速度，判断碰撞后动量守恒的实现.

```python

#滑动摩擦系数
u=0.004
#中立
g=9.8
import math
def friction_force(m):#滑动摩檫力
    return m * g * u
def friction_force_a():#滑动摩擦力给的加速度
    return -g * u
def setV(obj1,obj2):#碰撞后的速度#默认弹性碰撞
    
```


[orignalExample]:./example/org.png
[beautifulExample]:./example/beaut.png
[end]:./example/end.png
[over]:./example/over.png